package org.gol.ui.quickfix

import org.eclipse.xtext.ui.editor.quickfix.DefaultQuickfixProvider
import org.eclipse.xtext.ui.editor.quickfix.Fix
import org.eclipse.xtext.ui.editor.quickfix.IssueResolutionAcceptor
import org.eclipse.xtext.validation.Issue
import org.gol.validation.GolValidator
import org.gol.gol.Condition

class GolQuickfixProvider extends DefaultQuickfixProvider {

    // Fixes the "Negative Neighbor" error by setting it to 0
    @Fix(GolValidator.INVALID_NEIGHBOR_COUNT)
    def void fixNegativeNeighborCount(Issue issue, IssueResolutionAcceptor acceptor) {
        acceptor.accept(issue, 
            "Set neighbors to 0", 
            "Change the neighbor count to 0.", 
            "upcase.png", 
            [ element, context |
                val condition = element as Condition
                condition.NCount = 0
            ]
        )
    }
}