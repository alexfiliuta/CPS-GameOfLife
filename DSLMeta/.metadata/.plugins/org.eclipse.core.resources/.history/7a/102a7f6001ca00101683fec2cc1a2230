package org.gol.formatting2

import com.google.inject.Inject
import org.eclipse.xtext.formatting2.AbstractFormatter2
import org.eclipse.xtext.formatting2.IFormattableDocument
import org.gol.gol.Game
import org.gol.gol.Grid
import org.gol.gol.Rules
import org.gol.services.GolGrammarAccess

class GolFormatter extends AbstractFormatter2 {
	
	@Inject extension GolGrammarAccess

	def dispatch void format(Game game, extension IFormattableDocument document) {
		game.grid.format
		game.rules.format
	}

	def dispatch void format(Grid grid, extension IFormattableDocument document) {
		grid.size.format
		for (populatedCell : grid.populatedCells) {
			populatedCell.format
		}
	}
	
	def dispatch void format(Rules rules, extension IFormattableDocument document) {
		for (rule : rules.rules) {
			rule.format
			rule.append[setNewLines(2)]
		}
	}
}